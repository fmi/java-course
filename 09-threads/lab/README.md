# üïµÔ∏è Agent 0777 (a.k.a. Steganography)

–ù—è–∫–æ–∏ —Å–µ –≤—ä–ª–Ω—É–≤–∞—Ç –∑–∞ –∏–¥–≤–∞—â–∞—Ç–∞ –∫–∞—Å–∫–∞–¥–∞ –ö–æ–ª–µ–¥–Ω–æ-–ù–æ–≤–æ–≥–æ–¥–∏—à–Ω–∏ –ø—Ä–∞–∑–Ω–∏—Ü–∏ –∏ —Å—ä–ø—ä—Ç—Å—Ç–≤–∞—â–∏—Ç–µ –≥–∏ –∑–µ–ª–µ–≤–∏ —Å–∞—Ä–º–∏, –¥—Ä—É–≥–∏ –∑–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—è —Å—Ç—É–¥–µ–Ω—Ç—Å–∫–∏ –ø—Ä–∞–∑–Ω–∏–∫, –Ω–æ –Ω–∞ –ê–≥–µ–Ω—Ç 0777 —Ö–∏—á –Ω–µ –º—É –µ –ø—Ä–∞–∑–Ω–∏—á–Ω–æ. –ó–∞ –ø–æ—Ä–µ–¥–Ω–∞ –≥–æ–¥–∏–Ω–∞ –≥–æ –ø—Ä–∞—â–∞—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞ –≤ –ø—Ä–æ–≤–∏–Ω—Ü–∏—è—Ç–∞ —Ç–æ—á–Ω–æ –ø—Ä–µ–¥–∏ –æ—Ç–ø—É—Å–∫–∞.

–ó–∞–¥–∞—á–∞—Ç–∞ –º—É —Ç–æ–∑–∏ –ø—ä—Ç –µ –¥–∞ —Å–µ –≤–Ω–µ–¥—Ä–∏ –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞ –ø—Ä–µ—Å—Ç—ä–ø–Ω–∞ –≥—Ä—É–ø–∞ —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∞ –≤ –ö—Ä–∞–≤–æ–¥–µ—Ä, –∫–æ—è—Ç–æ –µ —á–∞—Å—Ç –æ—Ç —Å–≤–µ—Ç–æ–≤–µ–Ω –∑–∞–≥–æ–≤–æ—Ä —Å—Ä–µ—â—É –±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –±–æ–±–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ. –û—Å–Ω–æ–≤–µ–Ω –ø—Ä–µ–¥–º–µ—Ç –Ω–∞ –¥–µ–π–Ω–æ—Å—Ç –Ω–∞ –≥—Ä—É–ø–∞—Ç–∞ –µ –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∞—Ç–∞ –Ω–∞ —Ñ–∞–ª—à–∏–≤ —Å–º–∏–ª—è–Ω—Å–∫–∏ –±–æ–± –æ—Ç –ë–∞–Ω–≥–ª–∞–¥–µ—à, –∫–æ–µ—Ç–æ –¥–∞ –Ω–∞–º–∞–ª—è–≤–∞ —Ü–µ–Ω–∞—Ç–∞ –∏ –¥–∞ –ø–æ–¥–±–∏–≤–∞ —Ä–æ–¥–Ω–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏. 

–ó–∞ –¥–∞ —Ä–∞–∑–±–∏–µ –∫–∞–Ω–∞–ª–∞, –ê–≥–µ–Ω—Ç 0777 —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–ø–µ—á–µ–ª–∏ –¥–æ–≤–µ—Ä–∏–µ—Ç–æ –Ω–∞ –∑–∞–≥–æ–≤–æ—Ä–Ω–∏—Ü–∏—Ç–µ –∏ –¥–∞ —Å—ä–±–µ—Ä–µ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—Å—Ç–≤–µ–Ω –º–∞—Ç–µ—Ä–∏–∞–ª —Å—Ä–µ—â—É –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ –≤–∏–Ω–æ–≤–Ω–∏—Ü–∏. –¢–æ–≤–∞ –≤–∫–ª—é—á–≤–∞ –æ–≥—Ä–æ–º–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–Ω–∏–º–∫–∏, –ø–æ–∫–∞–∑–≤–∞—â–∏ —Ä–∞–∑–ª–∏—á–Ω–∏ –µ—Ç–∞–ø–∏ –æ—Ç –ø—Ä–µ—Å—Ç—ä–ø–Ω–∞—Ç–∞ —Å—Ö–µ–º–∞. –ò–º–∞ —Å–∞–º–æ –µ–¥–∏–Ω –ø—Ä–æ–±–ª–µ–º ‚Äì –±–∞–Ω–¥–∏—Ç–∏—Ç–µ –≤–∑–∏–º–∞—Ç —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞ –º–Ω–æ–≥–æ –Ω–∞—Å–µ—Ä–∏–æ–∑–Ω–æ –∏ —Ä–µ–¥–æ–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–≤–∞—Ç –∑–∞ –ø—Ä–µ–¥–∞—Ç–µ–ª–∏. 
–¢–æ—á–Ω–æ –∑–∞—Ç–æ–≤–∞ –Ω–∞ –ê–≥–µ–Ω—Ç 0777 –º—É —Ç—Ä—è–±–≤–∞ –Ω–∞—á–∏–Ω –¥–∞ –ø—Ä–∏–∫—Ä–∏–µ —É–ª–∏—á–∞–≤–∞—â–∏—Ç–µ —Å–Ω–∏–º–∫–∏ –∫–∞—Ç–æ –Ω–µ—â–æ –¥–æ—Å—Ç–∞ –ø–æ-–±–∞–Ω–∞–ª–Ω–æ. –ó–∞ —â–∞—Å—Ç–∏–µ —Ç–æ–π –∏–º–∞ –∏–¥–µ—è, –Ω–æ —â–µ –º—É —Ç—Ä—è–±–≤–∞ –ø–æ–º–æ—â –æ—Ç –≤–∞—Å –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞. –©–µ –º—É –ø–æ–º–æ–≥–Ω–µ—Ç–µ, –∫–∞—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∏—Ç–µ —Å–≤—Ä—ä—Ö—Å–µ–∫—Ä–µ—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –¥—Ä—É–≥–æ, –±–µ–∑ —Ç–æ–≤–∞ –¥–∞ –º–æ–∂–µ –¥–∞ —Å–µ –∑–∞–±–µ–ª–µ–∂–∏ —Å –ø—Ä–æ—Å—Ç–æ –æ–∫–æ. –ó–∞ —Ü–µ–ª—Ç–∞ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```java
package bg.sofia.uni.fmi.mjt.steganography;

public interface ImageCodec {

    /**
     * Iterates over all files from @coverSourceDirectory and @secretSourceDirectory in a lexicographic order and
     * picks up image ones - those with extensions png. Embeds all the images from @secretSourceDirectory into the
     * corresponding images from @coverSourceDirectory. Both directories are guaranteed to have the same number of
     * images and the secret image will always be embeddable in the cover image.
     * The resulting images are saved with the name of the corresponding cover image into the @outputDirectory.
     */
    void embedPNGImages(String coverSourceDirectory, String secretSourceDirectory, String outputDirectory);

    /***
     * Iterates over all files from @sourceDirectory and picks up image ones - those with extensions png.
     * Extracts from them the embedded images and saves the in the @outputDirectory with the same name as
     * the corresponding image from the @sourceDirectory.
     *
     * @param sourceDirectory the source directory containing the embedded images
     * @param outputDirectory the output directory in which the extracted images are saved
     */
    void extractPNGImages(String sourceDirectory, String outputDirectory);

}
```

–í–∞—à–∞—Ç–∞ —Ü–µ–ª –µ –¥–∞ –Ω–∞–ø–∏—à–µ—Ç–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è `ImageCodecImpl` –Ω–∞ —Ç–æ–∑–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—è—Ç–æ —Å–µ –≤—ä–∑–ø–æ–ª–∑–≤–∞ –æ—Ç –º–Ω–æ–≥–æ –Ω–∏—à–∫–∏, –∑–∞ –¥–∞ —É—Å–∫–æ—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

:bulb: –î–Ω–µ—à–Ω–∞—Ç–∞ –∑–∞–¥–∞—á–∞, –º–∞–∫–∞—Ä –∏ –≤ –º–∞–∫—Å–∏–º–∞–ª–Ω–æ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥, –Ω–∏ –∑–∞–ø–æ–∑–Ω–∞–≤–∞ —Å –µ–¥–∏–Ω —á–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω –∫–ª–∞—Å–∏—á–µ—Å–∫–∏ concurrency *design pattern*: [Producer-Consumer](https://jenkov.com/tutorials/java-concurrency/producer-consumer.html). –¢–æ–π —Å–µ –ø–æ–ª–∑–≤–∞ –∑–∞ –æ—Ç–¥–µ–ª—è–Ω–µ (*decoupling*) –Ω–∞ *producer* –∏ *consumer* –ª–æ–≥–∏–∫–∞—Ç–∞ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∏, —á—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª—è–Ω–µ –Ω–∞ *–∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–µ—Ç–æ* –Ω–∞ –∑–∞–¥–∞—á–∏/—Ä–∞–±–æ—Ç–∞ –æ—Ç *–∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ* –Ω–∞ —Ç–µ–∑–∏ –∑–∞–¥–∞—á–∏/—Ä–∞–±–æ—Ç–∞, —Ç–∞–∫–∞ —á–µ —Ç–µ –¥–∞ —Å–∞ *—Å–ª–∞–±–æ —Å–≤—Ä—ä–∑–∞–Ω–∏* (*loosely coupled*) –∏ –¥–∞ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

![Producer-Consumer Pattern](./resources/producer-consumer.png)

–ó–∞ –≤—Å–µ–∫–∏ —Ñ–∞–π–ª –≤ –∑–∞–¥–∞–¥–µ–Ω–∞ –ø–∞–ø–∫–∞ —â–µ —Å—ä–∑–¥–∞–≤–∞–º–µ –ø–æ –µ–¥–Ω–∞ Producer –Ω–∏—à–∫–∞, —á–∏—è—Ç–æ –∑–∞–¥–∞—á–∞ –µ –¥–∞ –∑–∞—Ä–µ–¥–∏ –ø–æ –µ–¥–Ω–∞ —Å–Ω–∏–º–∫–∞ –æ—Ç coverSourceDirectory –∏ secretSourceDirectory –≤ –ø–∞–º–µ—Ç—Ç–∞, –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –µ –≤—ä–∑–º–æ–∂–Ω–æ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ—Ç–æ, –∞–∫–æ –¥–∞ - –¥–∞ –¥–æ–±–∞–≤–∏ –¥–≤–æ–π–∫–∞—Ç–∞ (coverImage, secretImage) –≤ –æ–ø–∞—à–∫–∞ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ.

Consumer –Ω–∏—à–∫–∏—Ç–µ –Ω–∏ —â–µ –∏–º–∞—Ç —Ñ–∏–∫—Å–∏—Ä–∞–Ω –±—Ä–æ–π (–º–æ–∂–µ –¥–∞ –ø–æ–µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ, –Ω–æ –µ–¥–Ω–∞ –¥–æ–±—Ä–∞ –æ—Ç–ø—Ä–∞–≤–Ω–∞ —Ç–æ—á–∫–∞ –µ [`Runtime.getRuntime().availableProcessors()`](https://docs.oracle.com/en/java/javase/25/docs/api//java.base/java/lang/Runtime.html#availableProcessors())) –∏ –∑–∞–¥–∞—á–∞—Ç–∞ –∏–º —â–µ –±—ä–¥–µ:
- –¥–∞ –≤–∑–µ–º–∞—Ç –¥–≤–æ–π–∫–∞ —Å–Ω–∏–º–∫–∏ –æ—Ç –æ–ø–∞—à–∫–∞—Ç–∞;
- –¥–∞ –æ–±—Ä–∞–±–æ—Ç—è—Ç —Å–Ω–∏–º–∫–∏—Ç–µ - –¥–∞ –≤–≥—Ä–∞–¥—è—Ç "—Ç–∞–π–Ω–∞—Ç–∞" –≤ "–æ–±–∏–∫–Ω–æ–≤–µ–Ω–∞—Ç–∞"
- –¥–∞ –∑–∞–ø–∞–∑—è—Ç –æ–±—Ä–∞–±–æ—Ç–µ–Ω–∞—Ç–∞ —Å–Ω–∏–º–∫–∞ –≤ –¥—Ä—É–≥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –∫–æ—è—Ç–æ –æ—Ç–Ω–æ–≤–æ –µ –¥–∞–¥–µ–Ω–∞ –∏ –∫–æ—è—Ç–æ –º–æ–∂–µ –≤—Å–µ –æ—â–µ –¥–∞ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ - —Ç.–µ. –º–æ–∂–µ –¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —è —Å—ä–∑–¥–∞–¥–µ–º.

–ò–∑–≤–ª–∏—á–∞–Ω–µ—Ç–æ –Ω–∞ –≤–≥—Ä–∞–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ –ø–æ–¥–æ–±–Ω–æ - –ø–æ –µ–¥–Ω–∞ Producer –Ω–∏—à–∫–∞ –∑–∞—Ä–µ–∂–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç –¥–∞–¥–µ–Ω–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤ –ø–∞–º–µ—Ç—Ç–∞ –∏ –≥–æ –ø–æ—Å—Ç–∞–≤—è –≤ –æ–ø–∞—à–∫–∞, –∞ —Ñ–∏–∫—Å–∏—Ä–∞–Ω –±—Ä–æ–π Consumer –Ω–∏—à–∫–∏ –≤–∑–µ–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç –æ–ø–∞—à–∫–∞—Ç–∞, –∏–∑–≤–ª–∏—á–∞—Ç –æ—Ç "–ø—Ä–∏–∫—Ä–∏–≤–∞—â–æ—Ç–æ" –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–≥—Ä–∞–¥–µ–Ω–æ—Ç–æ, –∏ –≥–æ –∑–∞–ø–∏—Å–≤–∞—Ç –≤ –¥–∞–¥–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è.

–ó–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–µ –¥–∞ –ø–æ–ª–∑–≤–∞—Ç–µ —Å–ª–µ–¥–Ω–æ—Ç–æ –ø–∞—Ä—á–µ –∫–æ–¥, –∫–∞—Ç–æ –º–æ–∂–µ –¥–∞ –≥–∏ —Ä–∞–∑–ø–æ–ª–æ–∂–∏—Ç–µ –∫—ä–¥–µ—Ç–æ —Å–º–µ—Ç–Ω–µ—Ç–µ –∑–∞ –¥–æ–±—Ä–µ:

```java
public BufferedImage loadImage(Path imagePath) {
    try {
        return ImageIO.read(imagePath.toFile());
    } catch (IOException e) {
        throw new UncheckedIOException(String.format("Failed to load image %s", imagePath.toString()), e);
    }
}

public void saveImage(BufferedImage image, String outputDir, String name) {
   try {
      ImageIO.write(image, "png", new File(outputDir, name));
      System.out.println("Saved " + name + " to " + outputDir);
   } catch (IOException e) {
      throw new UncheckedIOException(String.format("While saving image %s", name), e);
   }
}
```

–ö–ª–∞—Å—ä—Ç [`BufferedImage`](https://docs.oracle.com/en/java/javase/25/docs/api//java.desktop/java/awt/image/BufferedImage.html) –µ —á–∞—Å—Ç –æ—Ç JDK-—Ç–æ, –æ—Ç –Ω–µ–≥–æ —â–µ –≤–∏ —Ç—Ä—è–±–≤–∞ –Ω–∞–π-–≤–µ—á–µ –º–µ—Ç–æ–¥–∞ –∑–∞ –≤–∑–∏–º–∞–Ω–µ –Ω–∞ –ø–∏–∫—Å–µ–ª –∫–∞—Ç–æ int `BufferedImage.getRGB(int x, int y)`.

## –ê–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ç–∞:

**–í–ê–ñ–ù–û:** –û–ø–∏—Å–∞–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º —Ä–∞–±–æ—Ç–∏ —Å–∞–º–æ –≤—ä—Ä—Ö—É PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ê–∫–æ –≥–æ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ä—Ä—Ö—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç —Ç–∏–ø JPEG, –∏–º–∞ —Ä–∏—Å–∫ –∫–æ–º–ø—é—Ç—ä—Ä—ä—Ç –≤–∏ –¥–∞ —Å–µ –ø–æ–¥–ø–∞–ª–∏, –¥–∞ –∑–∞–ø–æ—á–Ω–µ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å—Ç—É–¥–µ–Ω —Ç–µ—Ä–º–æ—è–¥—Ä–µ–Ω —Å–∏–Ω—Ç–µ–∑ –∏–ª–∏ –¥–∞ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ —Ç–æ—á–∫–∞ –Ω–∞ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞ —Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç.<br>

‚ö†Ô∏è **PROCEED AT YOUR OWN RISK** ‚ö†Ô∏è

**–†–µ—á–Ω–∏–∫:**
- **LSB** ‚Äì least significant bit (–Ω–∞–π-–º–∞–ª–∫–æ –∑–Ω–∞—á–∏–º –±–∏—Ç)
- **MSB** ‚Äì most significant bit (–Ω–∞–π-–∑–Ω–∞—á–∏–º –±–∏—Ç)

–ù–µ–∫–∞ –∏–º–∞–º–µ –¥–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - *C* (–æ—Ç *cover) –∏ *S* (–æ—Ç secret), –∫–∞—Ç–æ –∏—Å–∫–∞–º–µ –¥–∞ –≤–≥—Ä–∞–¥–∏–º *S* –≤ C. –¢–æ–≤–∞ —Å–µ –ø–æ—Å—Ç–∏–≥–∞ –ø–æ —Å–ª–µ–¥–Ω–∏—è –Ω–∞—á–∏–Ω:

1. –í–∑–µ–º–∞–º–µ –±—Ä–æ—è –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ *C* (–Ω–µ–∫–∞ —Ç–æ–π –µ –•) –∏ –±—Ä–æ—è –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ *S* (–Ω–µ–∫–∞ —Ç–æ–π –µ –£).
2. –ê–∫–æ –• < –£ + 8, —Ç–æ –Ω–µ –º–æ–∂–µ–º –¥–∞ –≤–≥—Ä–∞–¥–∏–º *C* –≤ *S*. –ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –ø—Ä–∏–∫–ª—é—á–≤–∞.
3. –í –ø—ä—Ä–≤–∏—Ç–µ —á–µ—Ç–∏—Ä–∏ –ø–∏–∫—Å–µ–ª–∞ –Ω–∞ *C* –≤–≥—Ä–∞–∂–¥–∞–º–µ —à–∏—Ä–∏–Ω–∞—Ç–∞ –Ω–∞ *S* –∫–∞—Ç–æ –≤ LSB –Ω–∞ –≤—Å–µ–∫–∏ –æ—Ç RGB –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏—Ç–µ –Ω–∞ –ø–∏–∫—Å–µ–ª–∞ —Å–ª–∞–≥–∞–º–µ –ø–æ –µ–¥–∏–Ω –±–∏—Ç –æ—Ç —à–∏—Ä–∏–Ω–∞—Ç–∞ (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ –µ, —á–µ —Ç—è –µ –Ω–µ –ø–æ–≤–µ—á–µ –æ—Ç 2<sup>12</sup> - 1, –∑–∞—Ç–æ–≤–∞ –ø–æ–ª–∑–≤–∞–º–µ 12 –±–∏—Ç–æ–≤–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ —à–∏—Ä–∏–Ω–∞—Ç–∞), –∑–∞–ø–æ—á–≤–∞–π–∫–∏ –æ—Ç MSB –Ω–∞ —à–∏—Ä–∏–Ω–∞—Ç–∞

**N.B.** –ü–∏–∫—Å–µ–ª–∏—Ç–µ —Å–µ –ø—Ä–µ–¥—Å—Ç–∞–≤—è—Ç —Å 32 –±–∏—Ç–∞, –Ω–æ –∑–Ω–∞—á–µ—â–∏—Ç–µ –±–∏—Ç–æ–≤–µ —Å–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 24 - –ø–æ 8 –∑–∞ –≤—Å–µ–∫–∏ –æ—Ç RGB –∫–∞–Ω–∞–ª–∏—Ç–µ

*–ü—Ä–∏–º–µ—Ä:*

–ù–µ–∫–∞ —à–∏—Ä–∏–Ω–∞—Ç–∞ –Ω–∞ *S* –µ 451 –ø–∏–∫—Å–µ–ª–∞. –î–≤–æ–∏—á–Ω–∞—Ç–∞ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ç–æ–≤–∞ –∫–∞—Ç–æ 12 –±–∏—Ç–æ–≤–æ —á–∏—Å–ª–æ –µ **000111000011**. –ë–æ–ª–¥–Ω–∞—Ç–∏—Ç–µ –±–∏—Ç–æ–≤–µ –≤ –∫—É—Ä—Å–∏–≤ –≤ –ø–∏–∫—Å–µ–ª–∏—Ç–µ –ø–æ-–¥–æ–ª—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞—Ç —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—Ç–µ –±–æ–ª–¥–Ω–∞—Ç–∏ –±–∏—Ç–æ–≤–µ –≤ –∫—É—Ä—Å–∏–≤ –≤ —à–∏—Ä–∏–Ω–∞—Ç–∞

&nbsp;&nbsp;&nbsp;&nbsp;–ü–∏–∫—Å–µ–ª 1: 00000000 00100100 00101001 00000001 -> 00000000 0010010***0*** 0010100***0*** 0000000***0*** - ***000***111000011

&nbsp;&nbsp;&nbsp;&nbsp;–ü–∏–∫—Å–µ–ª 2: 00000000 00011001 10001000 00000001 -> 00000000 0001100***1*** 1000100***1*** 0000000***1*** - 000***111***000011

&nbsp;&nbsp;&nbsp;&nbsp;–ü–∏–∫—Å–µ–ª 3: 00000000 00001111 00001111 00001111 -> 00000000 0000111***0*** 0000111***0*** 0000111***0*** - 000111***000***011

&nbsp;&nbsp;&nbsp;&nbsp;–ü–∏–∫—Å–µ–ª 4: 00000000 11111111 00000000 11111111 -> 00000000 1111111***0*** 0000000***1*** 1111111***1*** - 000111000***011***

4. –í—ä–≤ –≤—Ç–æ—Ä–∏—Ç–µ —á–µ—Ç–∏—Ä–∏ –ø–∏–∫—Å–µ–ª–∞ –Ω–∞ *C* –≤–≥—Ä–∞–∂–¥–∞–º–µ –¥—ä–ª–∂–∏–Ω–∞—Ç–∞ –Ω–∞ *S* –∫–∞—Ç–æ –≤ LSB –Ω–∞ –≤—Å–µ–∫–∏ –æ—Ç RGB –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏—Ç–µ –Ω–∞ –ø–∏–∫—Å–µ–ª–∞ —Å–ª–∞–≥–∞–º–µ –ø–æ –µ–¥–∏–Ω –±–∏—Ç –æ—Ç –¥—ä–ª–∂–∏–Ω–∞—Ç–∞ (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ –µ, —á–µ —Ç—è –µ –Ω–µ –ø–æ–≤–µ—á–µ –æ—Ç 2<sup>12</sup> - 1, –∑–∞—Ç–æ–≤–∞ –ø–æ–ª–∑–≤–∞–º–µ 12 –±–∏—Ç–æ–≤–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –¥—ä–ª–∂–∏–Ω–∞—Ç–∞), –∑–∞–ø–æ—á–≤–∞–π–∫–∏ –æ—Ç MSB –Ω–∞ –¥—ä–ª–∂–∏–Ω–∞—Ç–∞ (–≤–∏–∂ –ø—Ä–∏–º–µ—Ä–∞ –∑–∞ —à–∏—Ä–∏–Ω–∞—Ç–∞ –ø–æ-–≥–æ—Ä–µ).

5. –í —Å–ª–µ–¥–≤–∞—â–∏—Ç–µ –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ *C* –∑–∞–ø–æ—á–≤–∞–º–µ –¥–∞ –≤–≥—Ä–∞–∂–¥–∞–º–µ —Å–∞–º–æ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ *S* –ø–æ —Å–ª–µ–¥–Ω–∏—è –Ω–∞—á–∏–Ω'
'
    * –ó–∞–ø–æ—á–≤–∞–º–µ –æ–±—Ö–æ–∂–¥–∞–Ω–µ –Ω–∞ –ø–∏–∫—Å–µ–ª–∏—Ç–µ –Ω–∞ *S* –æ—Ç –≥–æ—Ä–µ –Ω–∞–¥–æ–ª—É –∏ –æ—Ç–ª—è–≤–æ –Ω–∞–¥—è—Å–Ω–æ
    * –ó–∞ –¥–∞–¥–µ–Ω –ø–∏–∫—Å–µ–ª –Ω–∞ *S* –≤–∑–µ–º–∞–º–µ –Ω–µ–≥–æ–≤–∏—Ç–µ RGB –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∏ –≥–∏ –æ—Å—Ä–µ–¥–Ω—è–≤–∞–º–µ, –∫–∞—Ç–æ –∑–∞–∫—Ä—ä–≥–ª—è–º–µ –Ω–∞–¥–æ–ª—É (–Ω–∞–ø—Ä. R=42, G=67, B=154 -> —Å—Ä–µ–¥–Ω–æ 87, –∑–∞ –ø–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∏–∂ [—Ç—É–∫](https://www.baeldung.com/cs/convert-rgb-to-grayscale#2-average-method)). –ü—ä—Ä–≤–∏—Ç–µ 3 MSB –Ω–∞ –æ—Å—Ä–µ–¥–Ω–µ–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç —Å–ª–∞–≥–∞–º–µ –Ω–∞ LSB –Ω–∞ –≤—Å—è–∫–∞ –æ—Ç RGB –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏—Ç–µ –æ—Ç —Å–ª–µ–¥–≤–∞—â–∏—è –ø–∏–∫—Å–µ–ª –Ω–∞ *C*, –∫–∞–∫—Ç–æ –≤ –ø—Ä–∏–º–µ—Ä–∞ —Å —à–∏—Ä–∏–Ω–∞—Ç–∞ (*C* —Å—ä—â–æ –æ–±—Ö–æ–∂–¥–∞–º–µ –æ—Ç –≥–æ—Ä–µ –Ω–∞–¥–æ–ª—É –∏ –æ—Ç –ª—è–≤–Ω–æ –Ω–∞–¥—è—Å–Ω–æ)
    * –ö–æ–≥–∞—Ç–æ —Å–≤—ä—Ä—à–∏–º —Å –ø–∏–∫—Å–µ–ª–∏—Ç–µ –Ω–∞ *S*, –∫–æ–ø–∏—Ä–∞–º–µ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ *C* –±–µ–∑ –¥–∞ –≥–∏ –ø—Ä–æ–º–µ–Ω—è–º–µ

## –ê–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ç–∞:

a–ª–≥–æ—Ä–∏—Ç—ä–º_–∑–∞_–∏–∑–≤–ª–∏—á–∞–Ω–µ_–Ω–∞_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ := $`\frac{1}{–∞–ª–≥–æ—Ä–∏—Ç—ä–º\_–∑–∞\_–≤–≥—Ä–∞–∂–¥–∞–Ω–µ\_–Ω–∞\_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ}`$

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ:

–¢–µ—Å—Ç–≤–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏–µ—Ç–æ —Å–∏ –ª–æ–∫–∞–ª–Ω–æ, –∫–∞—Ç–æ –∏–∑–±–µ—Ä–µ—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ–∏—Ç–æ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è—Ç –Ω–∞ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è—Ç–∞ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞ –∑–∞ —Ä–∞–∑–º–µ—Ä –∏ —Ç–∏–ø. –ü—É—Å–Ω–µ—Ç–µ –Ω—è–∫–æ–ª–∫–æ –ø—ä—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ—Ç–æ —Å–∏ - –∫–æ–ª–∫–æ—Ç–æ –ø–æ–≤–µ—á–µ, —Ç–æ–ª–∫–æ–≤–∞ –ø–æ-–¥–æ–±—Ä–µ.
Race-condition-–∏—Ç–µ –∏ deadlock-–æ–≤–µ—Ç–µ –º–æ–∂–µ –¥–∞ –Ω–µ —Å–µ —Ä–µ–ø—Ä–æ–¥—É—Ü–∏—Ä–∞—Ç –≤—Å–µ–∫–∏ –ø—ä—Ç, –∑–∞—Ç–æ–≤–∞ –µ –ø–æ-–¥–æ–±—Ä–µ –¥–∞ –ø—Ä–æ–±–≤–∞—Ç–µ –ø–æ–Ω–µ 5-10 –ø—ä—Ç–∏. –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –≤–∏ –ø—Ä–∏–∫–ª—é—á–≤–∞, –∞ –Ω–µ —Å–∞–º–æ, —á–µ –≤—ä—Ä—à–∏ —Ç–æ–≤–∞, –∫–æ–µ—Ç–æ –µ –æ–ø–∏—Å–∞–Ω–æ. –í –ø—Ä–æ—Ç–∏–≤–µ–Ω —Å–ª—É—á–∞–π –≤ –≥—Ä–µ–π–¥—ä—Ä–∞ —â–µ –∑–∞–≤–∏—Å–Ω–µ –∏ —â–µ —Ñ–µ–π–ª–Ω–µ.

–ë–æ–Ω—É—Å —Å—ä–≤–µ—Ç - –ø—ä—Ä–≤–æ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–π—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞ –≤ –µ–¥–Ω–æ–Ω–∏—à–∫–æ–≤ –∫–æ–¥ –∏ —Å–µ —É–≤–µ—Ä–µ—Ç–µ, —á–µ —Ä–∞–±–æ—Ç–∏ —á—Ä–µ–∑ —Ä—ä—á–µ–Ω —Ç–µ—Å—Ç –∏ —á–∞–∫ —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –∑–∞–µ–º–µ—Ç–µ —Å –ø–∞—Ä–∞–ª–µ–ª–∏–∑–∞—Ü–∏—è—Ç–∞. –¢–∞–∫–∞ —â–µ –±–æ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–∏—Ç–µ –µ–¥–∏–Ω –ø–æ –µ–¥–∏–Ω, –∞ –Ω–µ –Ω–∞–∫—É–ø.

**Hint:** –£—Å–ª–æ–≤–∏–µ—Ç–æ –∫—Ä–∏–µ –Ω—è–∫–æ–∏ —Ä–µ—Å—É—Ä—Å–∏, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–∞ –≤–∏ –ø–æ–ª–µ–∑–Ω–∏ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ.

## –û–±—â–∏ –±–µ–ª–µ–∂–∫–∏:
 - –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, –≤ –∫–æ—è—Ç–æ –¥–∞ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç–µ –∑–∞–¥–∞—á–∏—Ç–µ, –∫–æ–∏—Ç–æ —Å–∞ –∑–∞—Ä–µ–¥–µ–Ω–∏ –æ—Ç producer –Ω–∏—à–∫–∏—Ç–µ.
 - Producer –∏ Consumer –Ω–∏—à–∫–∏—Ç–µ –∑–∞–ø–æ—á–≤–∞—Ç —Ä–∞–±–æ—Ç–∞ _—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª–Ω–æ_ –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ - –Ω–µ –∫–∞—Ä–∞–π—Ç–µ Consumer-–∏—Ç–µ –¥–∞ —á–∞–∫–∞—Ç –≤—Å–∏—á–∫–∏ Producer –Ω–∏—à–∫–∏ –¥–∞ –ø—Ä–∏–∫–ª—é—á–∞—Ç.
 - –í –¥–∞–¥–µ–Ω –º–æ–º–µ–Ω—Ç (–¥–æ–∫–∞—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏—Ç–µ –≤—Å–µ –æ—â–µ —Å–µ –æ–±—Ö–æ–∂–¥–∞—Ç –∏ –∏–º–∞–º–µ –ø–æ-–≥–æ–ª–µ–º–∏ —Ñ–∞–π–ª–æ–≤–µ), –º–æ–∂–µ –¥–∞ –Ω—è–º–∞ –∑–∞—Ä–µ–¥–µ–Ω–∏ –∑–∞–¥–∞—á–∏ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞. –í —Ç–∞–∫—ä–≤ —Å–ª—É—á–∞–π, Consumer –Ω–∏—à–∫–∏—Ç–µ —Å–∏ "–ø–æ—á–∏–≤–∞—Ç" –∏ –∏–∑—á–∞–∫–≤–∞—Ç –¥–∞ —Å–µ –ø–æ—è–≤—è—Ç –Ω–æ–≤–∏ –∑–∞–¥–∞—á–∏.
 - –¢–æ–∑–∏ –∞–ª–≥–æ—Ä–∏—Ç—ä–º –≥—É–±–∏ –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–æ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–æ –¥–æ—Ä–∏ —Å–ª–µ–¥ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ –∏ –∏–∑–≤–ª–∏—á–∞–Ω–µ –ø–∞–∫ —Å–µ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞ —Ä–∞–∑—É–º–Ω–æ –Ω–∏–≤–æ –Ω–∞ –¥–µ—Ç–∞–π–ª.
 - –ú–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–≥–ª–µ–¥–∞—Ç–µ [—Ç–æ–≤–∞](https://www.youtube.com/watch?v=TWEXCYQKyDc) –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∫–ª–∏–ø—á–µ –ø–æ —Ç–µ–º–∞—Ç–∞. –ò–º–∞ –∏ –¥–æ—Å—Ç–∞ –ø–æ-—Å–ª–æ–∂–Ω–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –æ—Ç —Ç–æ–∑–∏, –∞ —â–µ —Ä–∞–∑–±–µ—Ä–µ—Ç–µ –∏ –∫–∞–∫—ä–≤ –µ –ø—Ä–æ–±–ª–µ–º—ä—Ç —Å JPEG
 - –ü—Ä–∏–ø–æ–º–Ω–µ—Ç–µ —Å–∏ –ø–æ–±–∏—Ç–æ–≤–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Java. –ë–∏ —Ç—Ä—è–±–≤–∞–ª–æ –¥–∞ —Å—Ç–µ –ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥–æ–±–Ω–∏ –Ω–µ—â–∞ –≤ –∫—É—Ä—Å–æ–≤–µ—Ç–µ –ø–æ –£–ü/–û–û–ü, –Ω—è–º–∞ –Ω–∏—â–æ –ª–æ—à–æ, —á–æ–≤–µ–∫ –¥–∞ —Å–∏ –ø–æ–∏–∑—Ü–∞–ø–∞ —Ä—ä—Ü–µ—Ç–µ –º–∞–ª–∫–æ üòÇ.
 - –ê–∫–æ –≤–∏ –µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –º–æ–∂–µ –¥–∞ —Å–∏ –ø–æ–∏–≥—Ä–∞—Ç–µ –∫–∞—Ç–æ —Å–º–µ–Ω–∏—Ç–µ –±—Ä–æ—è –Ω–∞ LSB –æ—Ç –ø–æ–∫—Ä–∏–≤–∞—â–æ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ–∏—Ç–æ –Ω–æ—Å—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–æ—Ç–æ. –ú–æ–∂–µ –¥–∞ —Å—Ä–∞–≤–Ω–∏—Ç–µ –∫–æ–ª–∫–æ —Å–µ –∏–∑–º–µ–Ω—è –ø–æ–∫—Ä–∏–≤–∞—â–æ—Ç–æ –∏ –∫–æ–ª–∫–æ –ø–æ–≤–µ—á–µ –¥–µ—Ç–∞–π–ª –ø–æ–ª—É—á–∞–≤–∞–º–µ –≤ —Ç–∞–π–Ω–æ—Ç–æ.

 ## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

–¢–æ–∑–∏ –ø—ä—Ç –∏–º–∞—Ç–µ –ø—ä–ª–Ω–∞ —Å–≤–æ–±–æ–¥–∞ –≤ –¥–∏–∑–∞–π–Ω–∞ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ—Ç–æ —É—Å–ª–æ–≤–∏–µ –µ –¥–∞ –∏–º–∞—Ç–µ –∫–ª–∞—Å `ImageCodecImpl`, –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—â `ImageCodec`.
–ö–∞–∫—Ç–æ –∫–∞–∑–≤–∞ —á–∏—á–æ –ë–µ–Ω –≤ Spider-Man, "with great power comes great responsibility".

```
src
‚îî‚îÄ bg.sofia.uni.fmi.mjt.steganography
    ‚îú‚îÄ‚îÄ ImageCodec.java
    ‚îú‚îÄ‚îÄ ImageCodecImpl.java
    ‚îî‚îÄ‚îÄ (...)
```

–í –≥—Ä–µ–π–¥—ä—Ä–∞ –∫–∞—á–µ—Ç–µ –ø–∞–ø–∫–∞—Ç–∞ `src`.

–£—Å–ø–µ—Ö, –ê–≥–µ–Ω—Ç 0777!

![Good Dog](./resources/DECODEME.png)
