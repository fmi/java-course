# Мрежово програмиране

## Secret Santa Wish List :santa: :gift: :christmas_tree:

**Secret Santa (Таен Дядо Коледа)** е коледна традиция, при която членовете на дадена група се разпределят на случаен принцип, кой на кого да подарява коледен подарък. 
Всеки от участниците знае само името на човека, на когото ще подарява подарък, и никой не знае името на човека, от когото ще получи подарък. Тайният Дядо Коледа получава списък с персонални желания на човека на когото ще подарява, от които да избере подарък. Тази традиция е много полулярна сред ученици от всички въздрасти, но поради пандемичната обстановка и онлайн обучението тази година се налага дигитализиране на избора кой на кого ще подарява подарък. Тук се включваме ние. 

Ще разработим Secret Santa Wish List клиент-сървър приложение със следната функционалност:

### Wish List Client

- Всеки ученик може да изпраща желание за подарък на който и да е друг ученик към сървъра. С една команда за изпращане може да се изпрати най-много един подарък. Името на ученика трябва да е една единствена дума, а името на подаръка може да е съставено от произволен брой думи
- Учениците могат да вземат списъка със желания за подарък на някой ученик, присъстващ в списъка с желания
- Учениците могат да прекратят връзката си към сървъра по всяко време

### Wish List Server

- Сървърът трябва да може да обслужва множество клиенти едновременно
- Сървърът получава команди от клиентите и връща подходящ резултат
- Когато получи **get-wish** команда, сървърът избира ученик от списъка на случаен принцип и след като върне резултата, изтрива информацията за този ученик
- Старайте се да спазвате формата съобщенията, които сървърът връща. Може да ги намерите описани [тук](https://github.com/fmi/java-course/blob/master/10-network/lab/README.md#Пример)

### Описание на клиентските команди

```bash
- post-wish <student_name> <wish> - изпраща желанието за подарък на ученик с име <student_name>
- get-wish – връща списъка с желанията на случайно избран от сървъра ученик
- disconnect – ученикът прекратява връзката си със сървъра
```

**Подсказка:** Припомнете си различните имплементации на [Echo Server](https://github.com/fmi/java-course/tree/master/10-network/snippets), които разгледахме на упражнението. Можем ли да ги превърнем в  Wish List Server?

**Подсказка:** Решението на тази задача ще ви улесни изключително много при разработката на курсовите ви проекти, защото всички те представляват приложения тип клиент-сървър, като сървърът обслужва много потребители едновременно.

### Пример

```bash
# start a wish list client from the command line
$ java bg.sofia.uni.fmi.mjt.wish.list.WishListClient
=> post-wish zdravko kolelo
[ Gift kolelo for student Zdravko submitted successfully ]

# or
[ The same gift for student Zdravko was already submitted ]

=> get-wish
[ Zdravko: [kolelo] ]

# or
[ Zdravko: [kolelo, topka] ]

#ор
[ Theare are no students present in the wishlist ]

=> disconnect
[ Disconnected from server ]

=> some random commands
[ Unknown command ]
```

### Тестване

Голяма част от имплементацията може да се тества със стандартни JUnit средства, но всяка програма тип клиент-сървър ни навежда на мисълта да ползваме mocking, за да тестваме изолирано логиката на клиента и логиката на сървъра.

:star: Писането на mockito тестовете за тази задача е по ваш избор, но съветваме всеки да пробва, тъй като ще ви е полезно и за курсовите проекти.

### Примерна структура на проекта

Добра практика при създаването на приложения тип клиент-сървър е да отделяте клиента и сървъра в отделни проекти. Това предотвратява грешки от типа, класове/интерфейси от клиента да се ползват от сървъра, или обратно. Също така, в реална ситуация, бихме искали да пакетираме и разпространяваме поотделно клиентската и сървърната част на нашето приложение.

В [sapera.org](http://grader.sapera.org/) качете *oбщ* `zip` архив на `src` и `test` директориите от *двата* проекта.

```bash
src
╷
├─ bg/sofia/uni/fmi/mjt/wish/list
|  ├─ WishListClient.java
|  └─ WishListServer.java
test
├─ bg/sofia/uni/fmi/mjt/wish/list
|  └─ WishListClientTest.java
|  └─ WishListServerTest.java
lib
├─ mockito-all-x.xx.xx.jar
└─ ...
```

### Dependencies

```bash
# for testing
wget https://repo1.maven.org/maven2/org/mockito/mockito-all/1.10.19/mockito-all-1.10.19.jar
```
